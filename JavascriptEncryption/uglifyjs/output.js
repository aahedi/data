"use strict";function OutputStream(n){function t(n,t){return n.replace(/[\u0080-\uffff]/g,function(n){var e=n.charCodeAt(0).toString(16);if(e.length>2||t){for(;e.length<4;)e="0"+e;return"\\u"+e}for(;e.length<2;)e="0"+e;return"\\x"+e})}function e(e){var i=0,r=0;return e=e.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(n){switch(n){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':return++i,'"';case"'":return++r,"'";case"\x00":return"\\x00"}return n}),n.ascii_only&&(e=t(e)),i>r?"'"+e.replace(/\x27/g,"\\'")+"'":'"'+e.replace(/\x22/g,'\\"')+'"'}function i(t){var i=e(t);return n.inline_script&&(i=i.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")),i}function r(e){return e=""+e,n.ascii_only&&(e=t(e,!0)),e}function o(t){return repeat_string(" ",n.indent_start+d-t*n.indent_level)}function c(){return w.charAt(w.length-1)}function a(){n.max_line_len&&h>n.max_line_len&&s("\n")}function s(t){t+="";var e=t.charAt(0);if(v&&(e&&";}".indexOf(e)>=0||/[;]$/.test(w)||(n.semicolons||x(e)?(b+=";",h++,y++):(b+="\n",y++,m++,h=0),n.beautify||(g=!1)),v=!1,a()),!n.beautify&&n.preserve_line&&N[N.length-1])for(var i=N[N.length-1].start.line;i>m;)b+="\n",y++,m++,h=0,g=!1;if(g){var r=c();(is_identifier_char(r)&&(is_identifier_char(e)||"\\"==e)||/^[\+\-\/]$/.test(e)&&e==r)&&(b+=" ",h++,y++),g=!1}var o=t.split(/\r?\n/),s=o.length-1;m+=s,0==s?h+=o[s].length:h=o[s].length,y+=t.length,w=t,b+=t}function p(){v=!1,s(";")}function f(){return d+n.indent_level}function u(n){var t;return s("{"),C(),k(f(),function(){t=n()}),D(),s("}"),t}function _(n){s("(");var t=n();return s(")"),t}function l(n){s("[");var t=n();return s("]"),t}function S(){s(","),E()}function T(){s(":"),n.space_colon&&E()}function A(){return b}n=defaults(n,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!0,ascii_only:!1,unescape_regexps:!1,inline_script:!1,width:80,max_line_len:32e3,beautify:!1,source_map:null,bracketize:!1,semicolons:!0,comments:!1,preserve_line:!1,screw_ie8:!1,preamble:null},!0);var d=0,h=0,m=1,y=0,b="",g=!1,v=!1,w=null,x=makePredicate("( [ + * / - , ."),E=n.beautify?function(){s(" ")}:function(){g=!0},D=n.beautify?function(t){n.beautify&&s(o(t?.5:0))}:noop,k=n.beautify?function(n,t){n===!0&&(n=f());var e=d;d=n;var i=t();return d=e,i}:function(n,t){return t()},C=n.beautify?function(){s("\n")}:noop,F=n.beautify?function(){s(";")}:function(){v=!0},O=n.source_map?function(t,e){try{t&&n.source_map.add(t.file||"?",m,h,t.line,t.col,e||"name"!=t.type?e:t.value)}catch(i){AST_Node.warn("Couldn't figure out mapping for {file}:{line},{col} â†’ {cline},{ccol} [{name}]",{file:t.file,line:t.line,col:t.col,cline:m,ccol:h,name:e||""})}}:noop;n.preamble&&s(n.preamble.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"));var N=[];return{get:A,toString:A,indent:D,indentation:function(){return d},current_width:function(){return h-d},should_break:function(){return n.width&&this.current_width()>=n.width},newline:C,print:s,space:E,comma:S,colon:T,last:function(){return w},semicolon:F,force_semicolon:p,to_ascii:t,print_name:function(n){s(r(n))},print_string:function(n){s(i(n))},next_indent:f,with_indent:k,with_block:u,with_parens:_,with_square:l,add_mapping:O,option:function(t){return n[t]},line:function(){return m},col:function(){return h},pos:function(){return y},push_node:function(n){N.push(n)},pop_node:function(){return N.pop()},stack:function(){return N},parent:function(n){return N[N.length-2-(n||0)]}}}!function(){function n(n,t){n.DEFMETHOD("_codegen",t)}function t(n,t){n.DEFMETHOD("needs_parens",t)}function e(n){var t=n.parent();return t instanceof AST_Unary?!0:t instanceof AST_Binary&&!(t instanceof AST_Assign)?!0:t instanceof AST_Call&&t.expression===this?!0:t instanceof AST_Conditional&&t.condition===this?!0:t instanceof AST_PropAccess&&t.expression===this?!0:void 0}function i(n,t,e){var i=n.length-1;n.forEach(function(n,r){n instanceof AST_EmptyStatement||(e.indent(),n.print(e),r==i&&t||(e.newline(),t&&e.newline()))})}function r(n,t){n.length>0?t.with_block(function(){i(n,!1,t)}):t.print("{}")}function o(n,t){if(t.option("bracketize"))return void l(n.body,t);if(!n.body)return t.force_semicolon();if(n.body instanceof AST_Do&&!t.option("screw_ie8"))return void l(n.body,t);for(var e=n.body;;)if(e instanceof AST_If){if(!e.alternative)return void l(n.body,t);e=e.alternative}else{if(!(e instanceof AST_StatementWithBody))break;e=e.body}s(n.body,t)}function c(n,t,e){if(e)try{n.walk(new TreeWalker(function(n){if(n instanceof AST_Binary&&"in"==n.operator)throw t})),n.print(t)}catch(i){if(i!==t)throw i;n.print(t,!0)}else n.print(t)}function a(n){return[92,47,46,43,42,63,40,41,91,93,123,125,36,94,58,124,33,10,13,0,65279,8232,8233].indexOf(n)<0}function s(n,t){t.option("bracketize")?!n||n instanceof AST_EmptyStatement?t.print("{}"):n instanceof AST_BlockStatement?n.print(t):t.with_block(function(){t.indent(),n.print(t),t.newline()}):!n||n instanceof AST_EmptyStatement?t.force_semicolon():n.print(t)}function p(n){for(var t=n.stack(),e=t.length,i=t[--e],r=t[--e];e>0;){if(r instanceof AST_Statement&&r.body===i)return!0;if(!(r instanceof AST_Seq&&r.car===i||r instanceof AST_Call&&r.expression===i&&!(r instanceof AST_New)||r instanceof AST_Dot&&r.expression===i||r instanceof AST_Sub&&r.expression===i||r instanceof AST_Conditional&&r.condition===i||r instanceof AST_Binary&&r.left===i||r instanceof AST_UnaryPostfix&&r.expression===i))return!1;i=r,r=t[--e]}}function f(n,t){return 0==n.args.length&&!t.option("beautify")}function u(n){for(var t=n[0],e=t.length,i=1;i<n.length;++i)n[i].length<e&&(t=n[i],e=t.length);return t}function _(n){var t,e=n.toString(10),i=[e.replace(/^0\./,".").replace("e+","e")];return Math.floor(n)===n?(0>n?i.push("-0x"+(-n).toString(16).toLowerCase(),"-0"+(-n).toString(8)):i.push("0x"+n.toString(16).toLowerCase(),"0"+n.toString(8)),(t=/^(.*?)(0+)$/.exec(n))&&i.push(t[1]+"e"+t[2].length)):(t=/^0?\.(0+)(.*)$/.exec(n))&&i.push(t[2]+"e-"+(t[1].length+t[2].length),e.substr(e.indexOf("."))),u(i)}function l(n,t){return n instanceof AST_BlockStatement?void n.print(t):void t.with_block(function(){t.indent(),n.print(t),t.newline()})}function S(n,t){n.DEFMETHOD("add_source_map",function(n){t(this,n)})}function T(n,t){t.add_mapping(n.start)}AST_Node.DEFMETHOD("print",function(n,t){function e(){i.add_comments(n),i.add_source_map(n),r(i,n)}var i=this,r=i._codegen;n.push_node(i),t||i.needs_parens(n)?n.with_parens(e):e(),n.pop_node()}),AST_Node.DEFMETHOD("print_to_string",function(n){var t=OutputStream(n);return this.print(t),t.get()}),AST_Node.DEFMETHOD("add_comments",function(n){var t=n.option("comments"),e=this;if(t){var i=e.start;if(i&&!i._comments_dumped){i._comments_dumped=!0;var r=i.comments_before||[];e instanceof AST_Exit&&e.value&&e.value.walk(new TreeWalker(function(n){return n.start&&n.start.comments_before&&(r=r.concat(n.start.comments_before),n.start.comments_before=[]),n instanceof AST_Function||n instanceof AST_Array||n instanceof AST_Object?!0:void 0})),t.test?r=r.filter(function(n){return t.test(n.value)}):"function"==typeof t&&(r=r.filter(function(n){return t(e,n)})),r.forEach(function(t){/comment[134]/.test(t.type)?(n.print("//"+t.value+"\n"),n.indent()):"comment2"==t.type&&(n.print("/*"+t.value+"*/"),i.nlb?(n.print("\n"),n.indent()):n.space())})}}}),t(AST_Node,function(){return!1}),t(AST_Function,function(n){return p(n)}),t(AST_Object,function(n){return p(n)}),t(AST_Unary,function(n){var t=n.parent();return t instanceof AST_PropAccess&&t.expression===this}),t(AST_Seq,function(n){var t=n.parent();return t instanceof AST_Call||t instanceof AST_Unary||t instanceof AST_Binary||t instanceof AST_VarDef||t instanceof AST_PropAccess||t instanceof AST_Array||t instanceof AST_ObjectProperty||t instanceof AST_Conditional}),t(AST_Binary,function(n){var t=n.parent();if(t instanceof AST_Call&&t.expression===this)return!0;if(t instanceof AST_Unary)return!0;if(t instanceof AST_PropAccess&&t.expression===this)return!0;if(t instanceof AST_Binary){var e=t.operator,i=PRECEDENCE[e],r=this.operator,o=PRECEDENCE[r];if(i>o||i==o&&this===t.right)return!0}}),t(AST_PropAccess,function(n){var t=n.parent();if(t instanceof AST_New&&t.expression===this)try{this.walk(new TreeWalker(function(n){if(n instanceof AST_Call)throw t}))}catch(e){if(e!==t)throw e;return!0}}),t(AST_Call,function(n){var t,e=n.parent();return e instanceof AST_New&&e.expression===this?!0:this.expression instanceof AST_Function&&e instanceof AST_PropAccess&&e.expression===this&&(t=n.parent(1))instanceof AST_Assign&&t.left===e}),t(AST_New,function(n){var t=n.parent();return f(this,n)&&(t instanceof AST_PropAccess||t instanceof AST_Call&&t.expression===this)?!0:void 0}),t(AST_Number,function(n){var t=n.parent();return this.getValue()<0&&t instanceof AST_PropAccess&&t.expression===this?!0:void 0}),t(AST_NaN,function(n){var t=n.parent();return t instanceof AST_PropAccess&&t.expression===this?!0:void 0}),t(AST_Assign,e),t(AST_Conditional,e),n(AST_Directive,function(n,t){t.print_string(n.value),t.semicolon()}),n(AST_Debugger,function(n,t){t.print("debugger"),t.semicolon()}),AST_StatementWithBody.DEFMETHOD("_do_print_body",function(n){s(this.body,n)}),n(AST_Statement,function(n,t){n.body.print(t),t.semicolon()}),n(AST_Toplevel,function(n,t){i(n.body,!0,t),t.print("")}),n(AST_LabeledStatement,function(n,t){n.label.print(t),t.colon(),n.body.print(t)}),n(AST_SimpleStatement,function(n,t){n.body.print(t),t.semicolon()}),n(AST_BlockStatement,function(n,t){r(n.body,t)}),n(AST_EmptyStatement,function(n,t){t.semicolon()}),n(AST_Do,function(n,t){t.print("do"),t.space(),n._do_print_body(t),t.space(),t.print("while"),t.space(),t.with_parens(function(){n.condition.print(t)}),t.semicolon()}),n(AST_While,function(n,t){t.print("while"),t.space(),t.with_parens(function(){n.condition.print(t)}),t.space(),n._do_print_body(t)}),n(AST_For,function(n,t){t.print("for"),t.space(),t.with_parens(function(){!n.init||n.init instanceof AST_EmptyStatement?t.print(";"):(n.init instanceof AST_Definitions?n.init.print(t):c(n.init,t,!0),t.print(";"),t.space()),n.condition?(n.condition.print(t),t.print(";"),t.space()):t.print(";"),n.step&&n.step.print(t)}),t.space(),n._do_print_body(t)}),n(AST_ForIn,function(n,t){t.print("for"),t.space(),t.with_parens(function(){n.init.print(t),t.space(),t.print("in"),t.space(),n.object.print(t)}),t.space(),n._do_print_body(t)}),n(AST_With,function(n,t){t.print("with"),t.space(),t.with_parens(function(){n.expression.print(t)}),t.space(),n._do_print_body(t)}),AST_Lambda.DEFMETHOD("_do_print",function(n,t){var e=this;t||n.print("function"),e.name&&(n.space(),e.name.print(n)),n.with_parens(function(){e.argnames.forEach(function(t,e){e&&n.comma(),t.print(n)})}),n.space(),r(e.body,n)}),n(AST_Lambda,function(n,t){n._do_print(t)}),AST_Exit.DEFMETHOD("_do_print",function(n,t){n.print(t),this.value&&(n.space(),this.value.print(n)),n.semicolon()}),n(AST_Return,function(n,t){n._do_print(t,"return")}),n(AST_Throw,function(n,t){n._do_print(t,"throw")}),AST_LoopControl.DEFMETHOD("_do_print",function(n,t){n.print(t),this.label&&(n.space(),this.label.print(n)),n.semicolon()}),n(AST_Break,function(n,t){n._do_print(t,"break")}),n(AST_Continue,function(n,t){n._do_print(t,"continue")}),n(AST_If,function(n,t){t.print("if"),t.space(),t.with_parens(function(){n.condition.print(t)}),t.space(),n.alternative?(o(n,t),t.space(),t.print("else"),t.space(),s(n.alternative,t)):n._do_print_body(t)}),n(AST_Switch,function(n,t){t.print("switch"),t.space(),t.with_parens(function(){n.expression.print(t)}),t.space(),n.body.length>0?t.with_block(function(){n.body.forEach(function(n,e){e&&t.newline(),t.indent(!0),n.print(t)})}):t.print("{}")}),AST_SwitchBranch.DEFMETHOD("_do_print_body",function(n){this.body.length>0&&(n.newline(),this.body.forEach(function(t){n.indent(),t.print(n),n.newline()}))}),n(AST_Default,function(n,t){t.print("default:"),n._do_print_body(t)}),n(AST_Case,function(n,t){t.print("case"),t.space(),n.expression.print(t),t.print(":"),n._do_print_body(t)}),n(AST_Try,function(n,t){t.print("try"),t.space(),r(n.body,t),n.bcatch&&(t.space(),n.bcatch.print(t)),n.bfinally&&(t.space(),n.bfinally.print(t))}),n(AST_Catch,function(n,t){t.print("catch"),t.space(),t.with_parens(function(){n.argname.print(t)}),t.space(),r(n.body,t)}),n(AST_Finally,function(n,t){t.print("finally"),t.space(),r(n.body,t)}),AST_Definitions.DEFMETHOD("_do_print",function(n,t){n.print(t),n.space(),this.definitions.forEach(function(t,e){e&&n.comma(),t.print(n)});var e=n.parent(),i=e instanceof AST_For||e instanceof AST_ForIn,r=i&&e.init===this;r||n.semicolon()}),n(AST_Var,function(n,t){n._do_print(t,"var")}),n(AST_Const,function(n,t){n._do_print(t,"const")}),n(AST_VarDef,function(n,t){if(n.name.print(t),n.value){t.space(),t.print("="),t.space();var e=t.parent(1),i=e instanceof AST_For||e instanceof AST_ForIn;c(n.value,t,i)}}),n(AST_Call,function(n,t){n.expression.print(t),n instanceof AST_New&&f(n,t)||t.with_parens(function(){n.args.forEach(function(n,e){e&&t.comma(),n.print(t)})})}),n(AST_New,function(n,t){t.print("new"),t.space(),AST_Call.prototype._codegen(n,t)}),AST_Seq.DEFMETHOD("_do_print",function(n){this.car.print(n),this.cdr&&(n.comma(),n.should_break()&&(n.newline(),n.indent()),this.cdr.print(n))}),n(AST_Seq,function(n,t){n._do_print(t)}),n(AST_Dot,function(n,t){var e=n.expression;e.print(t),e instanceof AST_Number&&e.getValue()>=0&&(/[xa-f.]/i.test(t.last())||t.print(".")),t.print("."),t.add_mapping(n.end),t.print_name(n.property)}),n(AST_Sub,function(n,t){n.expression.print(t),t.print("["),n.property.print(t),t.print("]")}),n(AST_UnaryPrefix,function(n,t){var e=n.operator;t.print(e),(/^[a-z]/i.test(e)||/[+-]$/.test(e)&&n.expression instanceof AST_UnaryPrefix&&/^[+-]/.test(n.expression.operator))&&t.space(),n.expression.print(t)}),n(AST_UnaryPostfix,function(n,t){n.expression.print(t),t.print(n.operator)}),n(AST_Binary,function(n,t){n.left.print(t),t.space(),t.print(n.operator),"<"==n.operator&&n.right instanceof AST_UnaryPrefix&&"!"==n.right.operator&&n.right.expression instanceof AST_UnaryPrefix&&"--"==n.right.expression.operator?t.print(" "):t.space(),n.right.print(t)}),n(AST_Conditional,function(n,t){n.condition.print(t),t.space(),t.print("?"),t.space(),n.consequent.print(t),t.space(),t.colon(),n.alternative.print(t)}),n(AST_Array,function(n,t){t.with_square(function(){var e=n.elements,i=e.length;i>0&&t.space(),e.forEach(function(n,e){e&&t.comma(),n.print(t),e===i-1&&n instanceof AST_Hole&&t.comma()}),i>0&&t.space()})}),n(AST_Object,function(n,t){n.properties.length>0?t.with_block(function(){n.properties.forEach(function(n,e){e&&(t.print(","),t.newline()),t.indent(),n.print(t)}),t.newline()}):t.print("{}")}),n(AST_ObjectKeyVal,function(n,t){var e=n.key;t.option("quote_keys")?t.print_string(e+""):"number"!=typeof e&&(t.option("beautify")||+e+""!=e)||parseFloat(e)<0?(RESERVED_WORDS(e)?t.option("screw_ie8"):is_identifier_string(e))?t.print_name(e):t.print_string(e):t.print(_(e)),t.colon(),n.value.print(t)}),n(AST_ObjectSetter,function(n,t){t.print("set"),t.space(),n.key.print(t),n.value._do_print(t,!0)}),n(AST_ObjectGetter,function(n,t){t.print("get"),t.space(),n.key.print(t),n.value._do_print(t,!0)}),n(AST_Symbol,function(n,t){var e=n.definition();t.print_name(e?e.mangled_name||e.name:n.name)}),n(AST_Undefined,function(n,t){t.print("void 0")}),n(AST_Hole,noop),n(AST_Infinity,function(n,t){t.print("1/0")}),n(AST_NaN,function(n,t){t.print("0/0")}),n(AST_This,function(n,t){t.print("this")}),n(AST_Constant,function(n,t){t.print(n.getValue())}),n(AST_String,function(n,t){t.print_string(n.getValue())}),n(AST_Number,function(n,t){t.print(_(n.getValue()))}),n(AST_RegExp,function(n,t){var e=""+n.getValue();t.option("ascii_only")?e=t.to_ascii(e):t.option("unescape_regexps")&&(e=e.split("\\\\").map(function(n){return n.replace(/\\u[0-9a-fA-F]{4}|\\x[0-9a-fA-F]{2}/g,function(n){var t=parseInt(n.substr(2),16);return a(t)?String.fromCharCode(t):n})}).join("\\\\")),t.print(e);var i=t.parent();i instanceof AST_Binary&&/^in/.test(i.operator)&&i.left===n&&t.print(" ")}),S(AST_Node,noop),S(AST_Directive,T),S(AST_Debugger,T),S(AST_Symbol,T),S(AST_Jump,T),S(AST_StatementWithBody,T),S(AST_LabeledStatement,noop),S(AST_Lambda,T),S(AST_Switch,T),S(AST_SwitchBranch,T),S(AST_BlockStatement,T),S(AST_Toplevel,noop),S(AST_New,T),S(AST_Try,T),S(AST_Catch,T),S(AST_Finally,T),S(AST_Definitions,T),S(AST_Constant,T),S(AST_ObjectProperty,function(n,t){t.add_mapping(n.start,n.key)})}();